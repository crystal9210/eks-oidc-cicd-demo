# 運用 Runbook 集・日常運用・定期点検・障害対応・復旧手順・運用記録・運用監査・引継ぎ・教育

このドキュメントは、**AWS×EKS×Kubernetes 基盤の運用全般（Runbook・日常運用・定期点検・障害対応・復旧・運用記録・監査・引継ぎ・教育）**を、
**現場最高水準・粒度・網羅性・具体例・コマンド例・運用フローを一切省略せず体系的に記述します。**

## 0. 運用全体像

-   **目的**
    -   安定稼働の維持、障害の迅速な検知と対応、継続的改善、運用品質の標準化と継承
-   **対象範囲**
    -   日常運用作業、定期点検、障害対応、復旧手順、運用記録管理、監査対応、運用教育・引継ぎ

## 1. 日常運用作業

### 1.1 クラスタ・ノード状態確認

```bash
kubectl get nodes -o wide
kubectl get pods --all-namespaces -o wide
kubectl top nodes
kubectl top pods --all-namespaces
```

-   **チェックポイント**
    -   ノード Ready 状態、Pod の CrashLoopBackOff や Pending 状態確認
    -   CPU/メモリ使用率の異常値検知

### 1.2 ログ監視

-   **CloudWatch Logs Insights**で重要ログの定期チェック
-   **Falco/GuardDuty/SIEM**のアラート対応

## 2. 定期点検

### 2.1 週次点検例

-   ノード・Pod の状態・リソース使用率
-   バックアップ状況（DB、ストレージ）
-   監査ログの整合性確認
-   セキュリティパッチ適用状況

### 2.2 月次点検例

-   IAM 権限レビュー
-   コスト・リソース利用状況レビュー
-   SLI/SLO 達成状況レビュー
-   運用 Runbook・ドキュメントの更新

## 3. 障害対応・復旧手順

### 3.1 インシデント受付・初動対応

-   インシデント管理システムに記録
-   影響範囲の特定
-   速やかに CSIRT・関係者へ通報

### 3.2 障害切り分け・対応例

-   Pod 障害時の再起動・再スケジューリング
-   ノード障害時の Drain・削除・ASG による自動復旧
-   DB 障害時のフェイルオーバー・リストア

### 3.3 復旧確認・報告

-   復旧後のサービス疎通確認
-   インシデント報告書作成・共有

## 4. 運用記録管理

-   障害対応履歴・変更履歴の記録と管理
-   定期レポート作成（稼働率、障害件数、対応時間など）

## 5. 運用監査対応

-   監査証跡の保存・提出
-   監査指摘事項の対応・改善管理

## 6. 運用引継ぎ・教育

-   新規メンバー向け運用マニュアル整備
-   定期的な運用訓練・模擬障害対応演習

## 7. ベストプラクティス・チェックリスト

-   [ ] 日常運用・定期点検は必ず Runbook 化し遵守
-   [ ] 障害対応は記録・報告・レビューを徹底
-   [ ] 運用記録は監査対応に備え長期保存
-   [ ] 運用教育・引継ぎは計画的に実施

## 8. 参考リンク

-   [AWS 運用ベストプラクティス](https://aws.amazon.com/jp/architecture/well-architected/)
-   [Kubernetes 運用ガイド](https://kubernetes.io/ja/docs/tasks/debug/debug-cluster/)
-   [CNCF 運用ベストプラクティス](https://github.com/cncf/tag-app-delivery/blob/main/whitepapers/operational-best-practices.md)

**このドキュメントは、運用全般の具体例・コマンド例・運用フロー・Runbook を網羅しています。**
